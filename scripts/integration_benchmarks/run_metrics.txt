# Submit intergation metrics running to slurm

# Eval Karin:
sbatch_script=$WSC/qtr_intercode_reproducibility-/scripts/integration_benchmarks/run_metrics.sbatch
eval_script="$WSC"/qtr_intercode_reproducibility-/scripts/integration_benchmarks/run_metrics.py
data_path=/storage/groups/ml01/workspace/karin.hrovatin/data/pancreas/scRNA/qtr/integrated/gsCellType_query/model/
batch=study_sample
cell_type=cell_type

unset FILES
declare -a FILES     

#FILES[0]='data_integrated_try.h5ad;X_integrated'
FILES[1]='adata_norm_integrated_RefQueryTraining.h5ad;X_qtr'
FILES[2]='adata_norm_integrated_RefQueryTraining.h5ad;X_seurat'
FILES[3]='adata_norm_integrated_RefQueryTraining.h5ad;X_scvi'
FILES[4]='adata_norm_integrated_RefQueryTraining.h5ad;X_symphony'


for i in "${!FILES[@]}"
do
  IFS=";" read -r file obsm  <<< "${FILES[$i]}"
  echo i $i file $file obsm $obsm
  sbatch $sbatch_script $eval_script "$data_path""$file" $obsm $batch $cell_type 
done
